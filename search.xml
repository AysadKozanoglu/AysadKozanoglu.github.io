<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Vagrant automation: create two machines  with debian bulleye image with virtualbox provider</title>
      <link href="/vagrant/virtualbox/provider/provision/create/vagrantfile/howto/"/>
      <url>/vagrant/virtualbox/provider/provision/create/vagrantfile/howto/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%flowchart LR   id1[/vagrant/]   id2[/Vagrantfile /]   id3[ define machine image Debian]   id4[/provision/]   id5[/virtualbox provider/]   id6[/startup/]   id7[/shutdown /]   id8[/destroy/]   id2-->id3   id3-->id1   id1-->id5   id5-->id4   id4-->id6   id4-->id7   id7-->id8</pre><p>Overview:</p><ul><li>install vagrant and virtualbox</li><li>create new folder and Vagrantfile to provisining machines</li><li>vagrant provisioning machines <ul><li>start</li><li>list</li><li>shutdown</li><li>destroy</li></ul></li></ul><span id="more"></span><h2 id="creating-new-folder-and-Vagrantfile"><a href="#creating-new-folder-and-Vagrantfile" class="headerlink" title="creating new folder and Vagrantfile"></a>creating new folder and Vagrantfile</h2><p>create new folder for your project </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir project-vagrantboxes</span><br></pre></td></tr></table></figure><h3 id="create-within-your-new-projectfolder-new-file-Vagrantfile"><a href="#create-within-your-new-projectfolder-new-file-Vagrantfile" class="headerlink" title="create within your new projectfolder new file Vagrantfile"></a>create within your new projectfolder new file Vagrantfile</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd project-vagrantboxes</span><br><span class="line">touch Vagrantfile</span><br></pre></td></tr></table></figure><p>now open the new file Vagrantfile with your prefered console editor like vim, nano what else, i use vim</p><p>Vagrantfile config file to provision two machines with debian bullseye image</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># vim Vagrantfile</span><br><span class="line"></span><br><span class="line">Vagrant.configure(&quot;2&quot;) do |config|</span><br><span class="line">config.vm.synced_folder &quot;.&quot;, &quot;/vagrant&quot;, disabled: true</span><br><span class="line">config.vm.synced_folder &quot;shared/&quot;, &quot;/home/vagrant/shared&quot;, create: true</span><br><span class="line">config.vm.provision &quot;shell&quot;, inline: &quot;echo machines don; ip a&quot;</span><br><span class="line">config.vm.box = &quot;debian/bullseye64&quot;</span><br><span class="line"></span><br><span class="line">config.vm.define &quot;m01&quot; do |m01|</span><br><span class="line">m01.vm.hostname = &quot;m01&quot;</span><br><span class="line">m01.vm.network &quot;private_network&quot;, ip: &quot;192.168.60.101&quot;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">config.vm.define &quot;m02&quot;, primary: true do |m02|</span><br><span class="line">m02.vm.hostname = &quot;m02&quot;</span><br><span class="line">m02.vm.network &quot;private_network&quot;, ip: &quot;192.168.60.102&quot;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>info: validate your Vagrantfile with:  <em>vagrant validate</em></p></blockquote><p>provisioning and startin your machines </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vagrant up</span><br></pre></td></tr></table></figure><h3 id="list-your-running-machines-with-virtualbox-provider"><a href="#list-your-running-machines-with-virtualbox-provider" class="headerlink" title="list your running machines with virtualbox provider"></a>list your running machines with virtualbox provider</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VBoxManage list runningvms</span><br></pre></td></tr></table></figure><p>smilar output:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BoxManage list runningvms</span><br><span class="line">&quot;vagrant_m01_1702138997583_2142&quot; &#123;6924c7f1-531a-4371-b891-5c1476f00829&#125;</span><br><span class="line">&quot;vagrant_m02_1702139034175_69860&quot; &#123;95c67b3f-d0ec-4ea9-8584-00d2d370feab&#125;</span><br></pre></td></tr></table></figure><h3 id="check-status-of-machines"><a href="#check-status-of-machines" class="headerlink" title="check status of machines"></a>check status of machines</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vagrant status m01</span><br><span class="line">vagrant status m02</span><br><span class="line"></span><br><span class="line"># // or automated</span><br><span class="line">for node in m01 m02; do vagrang status  $node;done</span><br></pre></td></tr></table></figure><h3 id="now-enjoy-your-machines"><a href="#now-enjoy-your-machines" class="headerlink" title="now enjoy your machines"></a>now enjoy your machines</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vagrant ssh m01   # or m02</span><br></pre></td></tr></table></figure><h3 id="shutdown-your-machines"><a href="#shutdown-your-machines" class="headerlink" title="shutdown your machines"></a>shutdown your machines</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vagrant halt m01</span><br><span class="line">vagrant halt m02</span><br><span class="line"></span><br><span class="line"># // or automated</span><br><span class="line">for node in m01 m02; do vagrant halt $node;done</span><br></pre></td></tr></table></figure><h3 id="destroy-machines"><a href="#destroy-machines" class="headerlink" title="destroy machines"></a>destroy machines</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vagrant destroy m01</span><br><span class="line">vagrant destory m02</span><br><span class="line"></span><br><span class="line"># // or automated</span><br><span class="line">for node in m01 m02; do vagrant destroy  $node;done</span><br></pre></td></tr></table></figure><p>demo</p><script type="text/javascript" src="https://asciinema.org/a/56hDACr6E45QkxZVyB604kXI3.js" id="asciicast-56hDACr6E45QkxZVyB604kXI3" async></script>]]></content>
      
      
      <categories>
          
          <category> vagrant </category>
          
          <category> virtualbox </category>
          
          <category> provider </category>
          
          <category> provision </category>
          
          <category> create </category>
          
          <category> vagrantfile </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vagrant </tag>
            
            <tag> virtualbox </tag>
            
            <tag> create </tag>
            
            <tag> box </tag>
            
            <tag> machine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Versions of Virtualbox  that vagrant virtualbox  provider supports</title>
      <link href="/vagrant/virtualbox/provider/support/index/"/>
      <url>/vagrant/virtualbox/provider/support/index/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%flowchart LRvagrant---|supported versions of|virtualbox</pre><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li>vagrant<ul><li>virtualbox versions<ul><li>versions support<ul><li>list</li></ul></li></ul></li></ul></li></ul><span id="more"></span><h2 id="version-of-virtualbox-that-vagrant-virtualbox-provider-supports"><a href="#version-of-virtualbox-that-vagrant-virtualbox-provider-supports" class="headerlink" title="version of virtualbox that vagrant virtualbox provider supports"></a>version of virtualbox that vagrant virtualbox provider supports</h2><ul><li>4.0.x </li><li>4.1.x </li><li>4.2.x </li><li>4.3.x </li><li>5.0.x</li><li>5.1.x</li><li>5.2.x </li><li>6.0.x</li><li>6.1.x</li><li>7.0.x</li></ul><blockquote><p>Other versions are unsupported and the provider will display an error message. Please note that beta and pre-release versions of VirtualBox are not supported and may not be well-behaved.</p></blockquote><p>Download repository:</p><ul><li><a href="https://download.virtualbox.org/virtualbox/">https://download.virtualbox.org/virtualbox/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> vagrant </category>
          
          <category> virtualbox </category>
          
          <category> provider </category>
          
          <category> support </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vagrant </tag>
            
            <tag> virtualbox </tag>
            
            <tag> versions </tag>
            
            <tag> provider </tag>
            
            <tag> support </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cryptsetup LUKS2 Creating encrypted virtual Disk Image and mount it</title>
      <link href="/cryptsetup/luks/encryption/virtual/disk/howto/"/>
      <url>/cryptsetup/luks/encryption/virtual/disk/howto/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%flowchart LR   id1[/virtual Disk/]   id3[/ ctryptsetup/]   id2[LUKS <br>format<br> encrypt<br>passphrase]   id9[/format ext4/]   id10[/open  /]   id5[/mount/]   id6[/detach /]   id7[/close  /]   id1-->id3   id3-->id2   id2-->id10   id10-->id9   id10-->id5   id5-->id6   id5-->id7</pre><h2 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h2><ul><li>install cryptsetup</li><li>creating virtual disk with dd </li><li>format and encrypt virtaul disk with cryptsetup <ul><li>setpassphrase</li></ul></li><li>opening encrypted virtual disk with cryptsetup<ul><li>format virtual disk with ext4 mkfs</li><li>create mountpoint with mkdir</li><li>mount LUKS opened disk to mointpoint</li><li>detach mount</li><li>close LUKS</li></ul></li></ul><span id="more"></span><h2 id="install-cryptsetup-LUKS"><a href="#install-cryptsetup-LUKS" class="headerlink" title="install cryptsetup LUKS"></a>install cryptsetup LUKS</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install cryptsetup-bin</span><br></pre></td></tr></table></figure><h2 id="Creating-virtual-Disk-file"><a href="#Creating-virtual-Disk-file" class="headerlink" title="Creating virtual Disk file"></a>Creating virtual Disk file</h2><p>virtual disk filename:<br>crypted-disk-luks.img</p><p>size:<br>100MB</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dd if=/dev/zero of=crypted-disk-luks.img  bs=100M count=0 seek=1</span><br></pre></td></tr></table></figure><blockquote><p>info: with <em>fdisk -l crypted-disk-luks.img</em> you can check virtual disk size</p></blockquote><h2 id="Disk-Encryption-preparation"><a href="#Disk-Encryption-preparation" class="headerlink" title="Disk Encryption preparation"></a>Disk Encryption preparation</h2><h3 id="format-and-encrypt-virtual-disk"><a href="#format-and-encrypt-virtual-disk" class="headerlink" title="format and encrypt virtual disk"></a>format and encrypt virtual disk</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cryptsetup -q -y  luksFormat crypted-disk-luks.img</span><br></pre></td></tr></table></figure><blockquote><p>info: you will be asked for passphrase to encrypt&#x2F;decrypt disk </p></blockquote><h3 id="open-LUKS-encrypted-virtual-disk"><a href="#open-LUKS-encrypted-virtual-disk" class="headerlink" title="open LUKS encrypted virtual disk"></a>open LUKS encrypted virtual disk</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo cryptsetup luksOpen /data/crypted/crypted-disk-luks.img virtualDiskMapper</span><br></pre></td></tr></table></figure><blockquote><p>info: virtualDiskMapper is the pointname under &#x2F;dev&#x2F;mapper&#x2F;virtalDiskMapper</p></blockquote><h2 id="check-LUKS-opened-virual-Disk-on-dev-mapper"><a href="#check-LUKS-opened-virual-Disk-on-dev-mapper" class="headerlink" title="check LUKS opened virual Disk on &#x2F;dev&#x2F;mapper"></a>check LUKS opened virual Disk on &#x2F;dev&#x2F;mapper</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo fdisk -l /dev/mapper/virtualDiskMapper</span><br></pre></td></tr></table></figure><blockquote><p>info: you should see size of disk little less than 100MB (it is ok)</p></blockquote><h3 id="format-inside-opened-LUKS-the-virtual-Disk-with-your-prefered-file-system"><a href="#format-inside-opened-LUKS-the-virtual-Disk-with-your-prefered-file-system" class="headerlink" title="format inside opened LUKS the virtual Disk with your prefered file system"></a>format inside opened LUKS the virtual Disk with your prefered file system</h3><p>in this case: ext4</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkfs.ext4 /dev/mapper/virtualDiskMapper</span><br></pre></td></tr></table></figure><blockquote><p>info: this format has no  effect to encryption, so do it</p></blockquote><h2 id="Mount-LUKS-encrypted-virtual-disk"><a href="#Mount-LUKS-encrypted-virtual-disk" class="headerlink" title="Mount LUKS encrypted virtual disk"></a>Mount LUKS encrypted virtual disk</h2><p>above we opened LUKS enrypted virtual already, in this point you dont need to open, because it is opened with passphrase already.</p><blockquote><p>sudo cryptsetup luksOpen &#x2F;data&#x2F;crypted&#x2F;crypted-disk-luks.img virtualDiskMapper</p></blockquote><h3 id="create-mountpoint-for-LUKS-virtual-disk"><a href="#create-mountpoint-for-LUKS-virtual-disk" class="headerlink" title="create mountpoint for LUKS virtual disk"></a>create mountpoint for LUKS virtual disk</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkdir /mnt/LUKSDISK</span><br></pre></td></tr></table></figure><blockquote><p>info: this mointpoint you need to create only one time</p></blockquote><h3 id="mount-LUKS-virtual-disk-to-mointpoint"><a href="#mount-LUKS-virtual-disk-to-mointpoint" class="headerlink" title="mount LUKS virtual disk to mointpoint"></a>mount LUKS virtual disk to mointpoint</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mount /dev/mapper/virtualDiskMapper /mnt/LUKSDISK</span><br></pre></td></tr></table></figure><h2 id="closing-LUKS-opened-virtual-disk"><a href="#closing-LUKS-opened-virtual-disk" class="headerlink" title="closing LUKS opened virtual disk"></a>closing LUKS opened virtual disk</h2><p>actually our enrypted disk is mounted on moinpoint.<br>so first detach mountpoint</p><h3 id="detach-moinpoint"><a href="#detach-moinpoint" class="headerlink" title="detach moinpoint"></a>detach moinpoint</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo umount /mnt/LUKSDISK</span><br></pre></td></tr></table></figure><h3 id="close-LUKS-virtual-Disk"><a href="#close-LUKS-virtual-Disk" class="headerlink" title="close LUKS virtual Disk"></a>close LUKS virtual Disk</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo cryptsetup luksClose virtualDiskMapper</span><br></pre></td></tr></table></figure><blockquote><p>info: this commad will detach dev mapped virtualDiskMapper also</p></blockquote><pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#fff',      'primaryBorderColor': '#cfd72b',      'lineColor': '#e6f01b',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%mindmap   root(Virtual Disk)     cryptsetup       LUKS         format           encrypt       LUKS open         decrypt           mount             close               detach mount               close luks</pre>]]></content>
      
      
      <categories>
          
          <category> cryptsetup </category>
          
          <category> luks </category>
          
          <category> encryption </category>
          
          <category> virtual </category>
          
          <category> disk </category>
          
      </categories>
      
      
        <tags>
            
            <tag> encryption </tag>
            
            <tag> decryption </tag>
            
            <tag> cryptsetup </tag>
            
            <tag> LUKS </tag>
            
            <tag> virtual Disk </tag>
            
            <tag> mount </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openssl aes-256 text encryption / decryption interactive mode</title>
      <link href="/encrypt/decrypt/aes-256/openssl/howto/"/>
      <url>/encrypt/decrypt/aes-256/openssl/howto/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%journey    title openssl aes-256  encryption interactive mode    section on Console      openssl : 5: use case      aes-256-cbc: 5: use case      enter text: 5: use case      enter secret: 5: use case      hash: 5: use case</pre><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li>console interactive mode<ul><li>openssl<ul><li>aes-256 algorithm</li><li>encryption</li><li>decryption</li><li>aes-256 hash</li><li>passphrase protected</li></ul></li></ul></li></ul><span id="more"></span><h2 id="openssl-AES-256-interactive-mode-encryption-and-decryption"><a href="#openssl-AES-256-interactive-mode-encryption-and-decryption" class="headerlink" title="openssl AES-256 interactive mode encryption and decryption"></a>openssl AES-256 interactive mode encryption and decryption</h2><h2 id="aes-256-encryption-interactive-mode-with-openssl"><a href="#aes-256-encryption-interactive-mode-with-openssl" class="headerlink" title="aes-256 encryption interactive mode with openssl"></a>aes-256 encryption interactive mode with openssl</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unset -v PASS</span><br><span class="line">unset -v STRING</span><br><span class="line">echo -e &quot;\n\n Text to encrypt:&quot;; read STRING;</span><br><span class="line">echo -e &quot;\n\nPassword: &quot;; read -s PASS;</span><br><span class="line">echo -e &quot;\n&quot;; echo Encrypted:;</span><br><span class="line">printf &quot;$STRING&quot; | openssl enc -e -base64 -A -a -pbkdf2 -aes-256-cbc -pass pass:&quot;$PASS&quot;;</span><br><span class="line">echo -e &quot;\n\n&quot;</span><br></pre></td></tr></table></figure><h2 id="aes-256-decryption-interactive-mode-with-openssl"><a href="#aes-256-decryption-interactive-mode-with-openssl" class="headerlink" title="aes-256 decryption interactive mode with openssl"></a>aes-256 decryption interactive mode with openssl</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unset -v PASS</span><br><span class="line">unset -v STRING</span><br><span class="line">echo -e &quot;\n\n Encrypted Hash:&quot;; read STRING; </span><br><span class="line">echo -e &quot;\n\n Password: &quot;; read -s PASS;</span><br><span class="line">echo -e &quot;\n\nDecrypted:&quot;; </span><br><span class="line">printf &quot;$STRING&quot; | openssl enc -d -base64 -A -aes-256-cbc -a -pbkdf2  -pass pass:&quot;$PASS&quot;</span><br><span class="line">echo -e &quot;\n\n&quot;</span><br></pre></td></tr></table></figure><p>demo:</p><script type="text/javascript" src="https://asciinema.org/a/GyrKDC6Ep3rYhEhCTXu0F57UE.js" id="asciicast-GyrKDC6Ep3rYhEhCTXu0F57UE" async></script><pre class="mermaid" style="background: none">mindmap  root(console)    enter string      enter password        openssl          aes-256 encryption            output aes-256 hash          aes-256 decryption             output plain text string</pre>]]></content>
      
      
      <categories>
          
          <category> encrypt </category>
          
          <category> decrypt </category>
          
          <category> aes-256 </category>
          
          <category> openssl </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aes256 </tag>
            
            <tag> openssl </tag>
            
            <tag> aes-256 </tag>
            
            <tag> crypt </tag>
            
            <tag> decrypt </tag>
            
            <tag> interactive </tag>
            
            <tag> console </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AES256 encryption and decryption file(s) with openssl</title>
      <link href="/encryption/openssl/aes256/howto/"/>
      <url>/encryption/openssl/aes256/howto/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%journey    title openssl aes-256 file encryption    section on Console      openssl : 3: use case      aes-256-cbc: 4: use case      file: 5: use case      secret: 6: use case</pre><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li>openssl<ul><li>aes-256 algorithm<ul><li>file <ul><li>encrytion</li><li>decryption</li><li>txt,yaml,tar.gz,bzip, zip</li></ul></li><li>passphrase protected</li></ul></li></ul></li></ul><span id="more"></span><h2 id="AES256-file-encryption"><a href="#AES256-file-encryption" class="headerlink" title="AES256 file encryption"></a>AES256 file encryption</h2><h3 id="encrypt-file-secret-txt-with-openssl"><a href="#encrypt-file-secret-txt-with-openssl" class="headerlink" title="encrypt file secret.txt with openssl"></a>encrypt file secret.txt with openssl</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl aes-256-cbc -a -salt -pbkdf2 -in secrets.txt -out secrets.txt.enc</span><br></pre></td></tr></table></figure><blockquote><p>info: give your password double to protect encryption </p></blockquote><pre class="mermaid" style="background: none">journey    title openssl aes-256 file decryption    section on Console      openssl : 3: use case      aes-256-cbc: 4: use case      encrypted file: 5: use case      secret: 6: use case</pre><h3 id="decrypt-file-secret-txt-enc-openssl"><a href="#decrypt-file-secret-txt-enc-openssl" class="headerlink" title="decrypt file secret.txt.enc openssl"></a>decrypt file secret.txt.enc openssl</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl aes-256-cbc -d -a -pbkdf2 -in secrets.txt.enc -out secrets.txt</span><br></pre></td></tr></table></figure><blockquote><p>info: you will be ask for your given protected given password </p></blockquote><p>you can also encrypt tar.gz files, so if you have multiple files to encrypt than compress it with zip , bzip or  tar.gz and than you can encrypt it </p><pre class="mermaid" style="background: none">mindmap  root((openssl))    algorithm      aes-256-cbc        file          encryption            protection              your password          decryption            proctection              your password</pre><p>thanks for reading</p><p>–<br>Aysad Kozanoglu</p>]]></content>
      
      
      <categories>
          
          <category> encryption </category>
          
          <category> openssl </category>
          
          <category> aes256 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aes256 </tag>
            
            <tag> encryption </tag>
            
            <tag> decryption </tag>
            
            <tag> openssl </tag>
            
            <tag> files </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LVM raid1 recovery: mount disk on another linux system debian buster</title>
      <link href="/lvm/raid1/disk/mount/recovery/howto/"/>
      <url>/lvm/raid1/disk/mount/recovery/howto/</url>
      
        <content type="html"><![CDATA[<pre class="mermaid" style="background: none">%%{  init: {    'theme': 'base',    'themeVariables': {      'primaryColor': '#3ed72b',      'primaryTextColor': '#000',      'primaryBorderColor': '#000',      'lineColor': '#fff',      'secondaryColor': '#e6f01b',      'tertiaryColor': '#fff'    }  }}%%flowchart LRdisk1---|LVM raid1|disk2</pre><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li>LVM<ul><li>Raid1</li><li>remove missing partial disk of radid1</li><li>rename Volu group VG</li><li>mount</li><li>recover<span id="more"></span></li></ul></li></ul><h2 id="scenario"><a href="#scenario" class="headerlink" title="scenario"></a>scenario</h2><p>in my showcase, i was using two ssd 2TB disks in LVM in raid1 mode.<br>My system was debian buster (10).</p><p>My Mainboard was crashed and i was not able to boot up my system. My OS  was installed on  seperatly 240GB ssd.</p><p>So my soft raid1 with LVM for the 2 disk with 2TB ssd, i was not able to get my data from there.</p><ul><li>240gb OS # only OS</li><li>2TB LVM Raid1 disk1 # data</li><li>2TB LVM Raid1 disk2 # data</li></ul><p>Here is my solution for recovery data from LVM raid1 from one part of disk from lvm raid1</p><h3 id="remove-disk-from-damaged-hardware"><a href="#remove-disk-from-damaged-hardware" class="headerlink" title="remove disk from  damaged hardware"></a>remove disk from  damaged hardware</h3><p>remove the one part of the ssd disk to connect with usb ssd adapter (sabrent) to another system. in my case i  working with debian buster (10)</p><h3 id="connect-disk-to-another-working-system"><a href="#connect-disk-to-another-working-system" class="headerlink" title="connect disk to another working system"></a>connect disk to another working system</h3><p>connect the disk with usb ssd adapter to your another working machine. in my case debian buster (10)</p><h2 id="get-info-from-connected-ssd-with-usb"><a href="#get-info-from-connected-ssd-with-usb" class="headerlink" title="get info from connected ssd with usb"></a>get info from connected ssd with usb</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line">pvdisplay</span><br><span class="line">vgdisplay</span><br></pre></td></tr></table></figure><blockquote><p>info: all this commands gives you  output and you would  get  information about disk,  lovume group, partiton volume, VG name, PV name</p></blockquote><p>pvdisplay and vgdisplay output should give you in the first line a WARNING:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WARNING: Couldn&#x27;t find device with uuid kGfIXi-i1m2-7pqw-5Aqb-mH2U-Q20f-YMrg1M.</span><br><span class="line">WARNING: VG VG01_STORAGE_RAID1 is missing PV kGfIXi-i1m2-7pqw-5Aqb-mH2U-Q20f-YMrg1M (last written to /dev/sdc).</span><br><span class="line"></span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               [unknown]</span><br><span class="line">  VG Name               VG01_STORAGE_RAID1</span><br><span class="line">  PV Size               &lt;1,82 TiB / not usable &lt;1,09 MiB</span><br><span class="line">  Allocatable           yes (but full)</span><br><span class="line">  PE Size               4,00 MiB</span><br><span class="line">  Total PE              476932</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          476932</span><br><span class="line">  PV UUID               kGfIXi-i1m2-7pqw-5Aqb-mH2U-Q20f-YMrg1M</span><br><span class="line"></span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sdc</span><br><span class="line">  VG Name               VG01_STORAGE_RAID1</span><br><span class="line">  PV Size               &lt;1,82 TiB / not usable &lt;1,09 MiB</span><br><span class="line">  Allocatable           yes (but full)</span><br><span class="line">  PE Size               4,00 MiB</span><br><span class="line">  Total PE              476932</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          476932</span><br><span class="line">  PV UUID               O0cX9Z-3YD8-dkFX-qPCA-i6RS-fAGe-Nbplt6</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>info: the is valid and it is ok because the partial disk (second disk) is not foundable </p></blockquote><h2 id="mount-lvm-raid1-partial-disk"><a href="#mount-lvm-raid1-partial-disk" class="headerlink" title="mount lvm raid1 partial disk"></a>mount lvm raid1 partial disk</h2><p>first, scan all connected disk for LVM with lvm tool lvscan</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lvscan</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ACTIVE &#x27;/dev/VG01_STORAGE_RAID1/LV01_STORAGE_RAID1&#x27; [&lt;1,82 TiB] inherit</span><br></pre></td></tr></table></figure><blockquote><p>info: in my scenario, i  named my volume group  <em>VG01_STORAGE_RAID1&#x2F;LV01_STORAGE_RAID1</em> . this part of disk is not mountable, until i removed the missing part disk (second disk &gt; raid1) </p></blockquote><h2 id="removing-missing-partial-disk-from-LVM-group"><a href="#removing-missing-partial-disk-from-LVM-group" class="headerlink" title="removing missing partial disk from LVM group"></a>removing missing partial disk from LVM group</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vgreduce --removemissing --force VG01_STORAGE_RAID1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Couldn&#x27;t find device with uuid kGfIXi-i1m2-7pqw-5Aqb-mH2U-Q20f-YMrg1M.</span><br><span class="line">Removing partial LV LV01_STORAGE_RAID1.</span><br><span class="line">Logical volume &quot;LV01_STORAGE_RAID1&quot; successfully removed</span><br><span class="line">Wrote out consistent volume group VG01_STORAGE_RAID1</span><br></pre></td></tr></table></figure><blockquote><p>info: failed&#x2F;bad disk is now successfully removed from LVM group</p></blockquote><h2 id="get-UUID-from-partial-VG-disk"><a href="#get-UUID-from-partial-VG-disk" class="headerlink" title="get UUID from partial VG disk"></a>get UUID from partial VG disk</h2><p>to rename VG volume group we have to get VG UUID first.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vgdisplay</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--- Volume group ---</span><br><span class="line">VG Name               VG01_STORAGE_RAID1</span><br><span class="line">System ID</span><br><span class="line">Format                lvm2</span><br><span class="line">Metadata Areas        1</span><br><span class="line">Metadata Sequence No  3</span><br><span class="line">VG Access             read/write</span><br><span class="line">VG Status             resizable</span><br><span class="line">MAX LV                0</span><br><span class="line">Cur LV                1</span><br><span class="line">Open LV               0</span><br><span class="line">Max PV                0</span><br><span class="line">Cur PV                2</span><br><span class="line">Act PV                1</span><br><span class="line">VG Size               &lt;3,64 TiB</span><br><span class="line">PE Size               4,00 MiB</span><br><span class="line">Total PE              953864</span><br><span class="line">Alloc PE / Size       953864 / &lt;3,64 TiB</span><br><span class="line">Free  PE / Size       0 / 0</span><br><span class="line">VG UUID               WNR45t-kuju-bSZq-iF2f-LJoA-ZCdb-G2uDkl</span><br></pre></td></tr></table></figure><blockquote><p>info: VG UUID is WNR45t-kuju-bSZq-iF2f-LJoA-ZCdb-G2uDkl</p></blockquote><h2 id="rename-VG-volume-group-name"><a href="#rename-VG-volume-group-name" class="headerlink" title="rename VG volume group name"></a>rename VG volume group name</h2><p>to mount as single disk we have to rename the LVM VG name first</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#vgrename &lt;UUID&gt;  NEW_NAME</span><br><span class="line">vgrename WNR45t-kuju-bSZq-iF2f-LJoA-ZCdb-G2uDkl NEW_VG01_STORAGE_RAID1</span><br><span class="line">vgchange -ay</span><br><span class="line">lvscan</span><br><span class="line"></span><br><span class="line">$#: ACTIVE &#x27;/dev/NEW_VG01_STORAGE_RAID1/LV01_STORAGE_RAID1&#x27; [&lt;1,82 TiB] inherit</span><br></pre></td></tr></table></figure><blockquote><p>info: now VG name is renamed to NEW_VG01_STORAGE_RAID1</p></blockquote><h2 id="mount-LVM-to-mountpoint"><a href="#mount-LVM-to-mountpoint" class="headerlink" title="mount LVM to mountpoint"></a>mount LVM to mountpoint</h2><h3 id="enable-dm-mod-in-kernel"><a href="#enable-dm-mod-in-kernel" class="headerlink" title="enable dm-mod in kernel"></a>enable dm-mod in kernel</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">modprobe dm-mod</span><br></pre></td></tr></table></figure><h3 id="create-mountpoint"><a href="#create-mountpoint" class="headerlink" title="create mountpoint"></a>create mountpoint</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir /mnt/LVM-RECOVED-DISK1</span><br></pre></td></tr></table></figure><h3 id="mount-LVM-DISK-VG"><a href="#mount-LVM-DISK-VG" class="headerlink" title="mount LVM DISK VG"></a>mount LVM DISK VG</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mount /dev/NEW_VG01_STORAGE_RAID1/LV01_STORAGE_RAID1 /mnt/LVM-RECOVED-DISK1</span><br></pre></td></tr></table></figure><h2 id="recover-your-data"><a href="#recover-your-data" class="headerlink" title="recover your data"></a>recover your data</h2><p>now you are able to force your data intire <em>&#x2F;mnt&#x2F;LVM-RECOVED-DISK1</em></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /mnt/LVM-RECOVED-DISK1</span><br><span class="line">ls -la</span><br></pre></td></tr></table></figure><pre class="mermaid" style="background: none">mindmap  root((LVM))    raid 1      2 disks    VG      volume group    LG      logical group    mainboard/cpu      defect    Restore      detache one part of disk      attach to another system      remove missing part of raid disk      reneme VG      load md module      mount    Tools      lvscan      vgdisplay      lvdisplay      vgreduce      pvdisplay      vgrename</pre><p>thanks for reading , i hope i helped you</p><p>–<br>Aysad Kozanoglu</p>]]></content>
      
      
      <categories>
          
          <category> lvm </category>
          
          <category> raid1 </category>
          
          <category> disk </category>
          
          <category> mount </category>
          
          <category> recovery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mount </tag>
            
            <tag> lvm </tag>
            
            <tag> recovery </tag>
            
            <tag> disk </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
